(()=>{"use strict";const e={scrollPosition:0,disabledScroll(){this.scrollPosition=window.scrollY,document.body.style.cssText=`\n      overflow: hidden;\n      position: fixed;\n      top: -${this.scrollPosition}px;\n      left: 0;\n      height: 100vh;\n      width: 100vw;\n      padding-right: ${window.innerWidth-document.body.offsetWidth}px;\n    `,document.documentElement.style.scrollBehavior="unset"},enabledScroll(){document.body.style.cssText="",window.scroll({top:this.scrollPosition}),document.documentElement.style.scrollBehavior=""}};document.addEventListener("DOMContentLoaded",(()=>{const t=function({modal:t,btnOpen:s,btnClose:n="",time:o=300}){const i=document.querySelectorAll(s),c=document.querySelector(t);if(null!==c){c.style.cssText=`\n      display: flex;\n      visibility: hidden;\n      opacity: 0;\n      transition: opacity ${o}ms ease-in-out;\n    `;const t=()=>{c.style.opacity=0,setTimeout((()=>{c.style.visibility="hidden",e.enabledScroll()}),o),window.removeEventListener("keydown",s)},s=e=>{const s=e?e.target:null;e&&s!==c&&!s.closest(".modal__close")&&"Escape"!==e.code||t()},l=()=>{c.style.visibility="visible",c.style.opacity=1,window.addEventListener("keydown",s),e.disabledScroll()};return i.forEach((e=>{e.addEventListener("click",l)})),c.addEventListener("click",s),""!==n&&document.querySelector(n).addEventListener("click",t),{open:l,close:s}}}({modal:".main__modal"});document.querySelector(".open__modal").addEventListener("click",(()=>t.open()));const s=document.querySelector(".form"),n=function(){try{const e=document.querySelector(".main__form"),t=e.querySelector("form"),s=e.querySelector(".success");if(t&&s){const e=e=>{const s=t.querySelector(".form__btn");s.classList.toggle("loading",e),s.disabled=e};return{start:()=>{e(!0)},finish:()=>{e(!1)},success:()=>{t.style.display="none",s.classList.add("visible"),t.reset()},error:e=>{alert(e||"Ошибка")},reset:()=>{e(!1),t.style.display="",s.classList.remove("visible"),t.reset()}}}console.debug("form или .success в обёртке не найдены.")}catch(e){console.debug("form или .success в обёртке не найдены.")}}();s.addEventListener("submit",(async e=>{e.preventDefault();try{const e=function(e){return{email:(e=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value);return e.classList.toggle("invalid",!t),t})(e.querySelector('input[type="email"]')),name:(e=>{const t=e.value.trim().length>0;return e.classList.toggle("invalid",!t),t})(e.querySelector('input[name="name"]')),message:(e=>{const t=e.value.trim().length>0;return e.classList.toggle("invalid",!t),t})(e.querySelector('textarea[name="message"]'))}}(s);if(e.email&&e.name&&e.message){n.start();const e=await async function(e){const t=new FormData(e);try{const e=await fetch("https://mp2a61c2e84e64c2fd14.free.beeceptor.com/data",{method:"POST",body:t});return!!e.ok&&(await e.json(),!0)}catch(e){return console.error("Ошибка при отправке данных формы:",e),!1}}(s);e?(n.finish(),n.success()):n.error()}}catch(e){n.error()}}))}))})();